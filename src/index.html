<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO OPTIMIZATION -->
    <title>Arsychat Ai | Compare DeepSeek, Kimi, GLM & Qwen in Parallel</title>
    <meta name="description" content="A powerful multi-model AI dashboard. Compare DeepSeek, Kimi, GLM-4, and Qwen side-by-side. Get 4 parallel responses for every prompt. Fully responsive.">
    <meta name="keywords" content="Arsychat, AI comparison, DeepSeek, Qwen, Kimi, GLM-4, Parallel AI Engine, Multi-model Chat">
    <meta name="author" content="MetaSpace">
    
    <!-- External Assets -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #020617; 
            color: #f1f5f9;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .glass { 
            background: rgba(15, 23, 42, 0.8); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255, 255, 255, 0.08); 
        }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        
        /* Mobile and Desktop Layout Handling */
        .model-card { height: 100%; min-height: 280px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .model-card:hover { border-color: rgba(59, 130, 246, 0.4); }
        
        /* Markdown Style Overrides */
        .markdown-body pre { background: #0f172a; padding: 1rem; border-radius: 0.75rem; overflow-x: auto; margin: 1rem 0; border: 1px solid #1e293b; }
        .markdown-body code { color: #38bdf8; font-family: monospace; font-size: 0.85rem; }
        .markdown-body p { margin-bottom: 0.75rem; line-height: 1.6; }
        
        /* Global Animations */
        @keyframes pulse { 50% { opacity: 0.4; } }
        .animate-thinking { animation: pulse 1.5s infinite; }

        /* Navigation Toggles */
        .btn-toggle.active { background: #2563eb; color: white; border-color: #3b82f6; box-shadow: 0 0 15px rgba(37, 99, 235, 0.2); }
        .btn-toggle.inactive { background: transparent; color: #64748b; border-color: #1e293b; }
    </style>
</head>
<body class="antialiased">

    <!-- Navbar: Branding & Model Switches -->
    <header class="glass border-b border-slate-800 p-3 md:p-4 z-50">
        <div class="max-w-[1800px] mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <!-- Branding -->
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-tr from-blue-600 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg">
                    <span class="text-white font-bold text-xl italic">A</span>
                </div>
                <div>
                    <h1 class="text-lg font-extrabold tracking-tight">Arsychat <span class="text-blue-500">Ai</span></h1>
                    <div class="flex items-center gap-2">
                        <span class="w-1.5 h-1.5 bg-green-500 rounded-full"></span>
                        <span class="text-[9px] uppercase font-bold text-slate-500 tracking-widest leading-none">Parallel Engine Active</span>
                    </div>
                </div>
            </div>

            <!-- Model Selection Bar -->
            <nav class="flex flex-wrap justify-center gap-2 bg-slate-900/60 p-1.5 rounded-xl border border-slate-800" aria-label="Model Toggle Menu">
                <button onclick="toggleModel('glm')" id="btn-glm" class="btn-toggle active px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border uppercase">GLM-4</button>
                <button onclick="toggleModel('kimi')" id="btn-kimi" class="btn-toggle active px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border uppercase">Kimi</button>
                <button onclick="toggleModel('deepseek')" id="btn-deepseek" class="btn-toggle active px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border uppercase">DeepSeek</button>
                <button onclick="toggleModel('qwen')" id="btn-qwen" class="btn-toggle active px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border uppercase">Qwen</button>
            </nav>
        </div>
    </header>

    <!-- Main Workspace: Model Response Grid -->
    <main class="flex-1 overflow-hidden relative">
        <div id="grid-container" class="h-full p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 overflow-y-auto custom-scrollbar">
            
            <!-- GLM Dashboard -->
            <article id="card-glm" class="model-card glass rounded-2xl flex flex-col border-slate-800">
                <div class="p-3 border-b border-slate-800 flex justify-between items-center bg-white/[0.02]">
                    <span class="text-[10px] font-bold uppercase tracking-widest text-blue-400">GLM-4.6 (Open)</span>
                    <div id="load-glm" class="hidden w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                </div>
                <div id="out-glm" class="flex-1 p-4 overflow-y-auto custom-scrollbar markdown-body text-sm text-slate-500 italic">Waiting for your prompt...</div>
            </article>

            <!-- Kimi Dashboard -->
            <article id="card-kimi" class="model-card glass rounded-2xl flex flex-col border-slate-800">
                <div class="p-3 border-b border-slate-800 flex justify-between items-center bg-white/[0.02]">
                    <span class="text-[10px] font-bold uppercase tracking-widest text-emerald-400">Kimi-K2 (Thinking)</span>
                    <div id="load-kimi" class="hidden w-3 h-3 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin"></div>
                </div>
                <div id="out-kimi" class="flex-1 p-4 overflow-y-auto custom-scrollbar markdown-body text-sm text-slate-500 italic">Ready to compare side-by-side.</div>
            </article>

            <!-- DeepSeek Dashboard -->
            <article id="card-deepseek" class="model-card glass rounded-2xl flex flex-col border-slate-800">
                <div class="p-3 border-b border-slate-800 flex justify-between items-center bg-white/[0.02]">
                    <span class="text-[10px] font-bold uppercase tracking-widest text-cyan-400">DeepSeek-V3</span>
                    <div id="load-deepseek" class="hidden w-3 h-3 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin"></div>
                </div>
                <div id="out-deepseek" class="flex-1 p-4 overflow-y-auto custom-scrollbar markdown-body text-sm text-slate-500 italic">Deep inference standby...</div>
            </article>

            <!-- Qwen Dashboard -->
            <article id="card-qwen" class="model-card glass rounded-2xl flex flex-col border-slate-800">
                <div class="p-3 border-b border-slate-800 flex justify-between items-center bg-white/[0.02]">
                    <span class="text-[10px] font-bold uppercase tracking-widest text-purple-400">Qwen-2.5 (8B)</span>
                    <div id="load-qwen" class="hidden w-3 h-3 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"></div>
                </div>
                <div id="out-qwen" class="flex-1 p-4 overflow-y-auto custom-scrollbar markdown-body text-sm text-slate-500 italic">Enter query to generate.</div>
            </article>

        </div>
    </main>

    <!-- Footer: Universal Input Field -->
    <footer class="p-4 md:p-6 bg-slate-950/90 border-t border-slate-800 backdrop-blur-2xl sticky bottom-0">
        <div class="max-w-4xl mx-auto relative group">
            <form id="chat-form" class="relative">
                <textarea 
                    id="user-prompt"
                    rows="1"
                    placeholder="Ask across all active models simultaneously..."
                    class="w-full bg-slate-900 border border-slate-700 rounded-2xl py-4 pl-5 pr-14 focus:outline-none focus:ring-2 focus:ring-blue-600/50 transition-all resize-none custom-scrollbar"
                ></textarea>
                <button 
                    type="submit"
                    id="submit-btn"
                    aria-label="Send Message"
                    class="absolute right-3 bottom-3 p-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl transition-all shadow-lg active:scale-90 disabled:opacity-30 disabled:pointer-events-none"
                >
                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                </button>
            </form>
            <div class="flex flex-col md:flex-row justify-between items-center mt-3 gap-2 px-1">
                <p class="text-[9px] text-slate-600 font-bold uppercase tracking-widest">Powered by Arsynox Parallel Inference Engine</p>
            </div>
        </div>
    </footer>

    <script>
        const API_BASE = "https://arsychat-api.metaspace.workers.dev/api";
        const modelState = { glm: true, kimi: true, deepseek: true, qwen: true };

        /**
         * Dynamic Model Management: Enable/Disable Toggles
         */
        function toggleModel(id) {
            modelState[id] = !modelState[id];
            const btn = document.getElementById(`btn-${id}`);
            const card = document.getElementById(`card-${id}`);
            const grid = document.getElementById('grid-container');

            if (modelState[id]) {
                btn.classList.replace('inactive', 'active');
                card.classList.remove('hidden');
            } else {
                btn.classList.replace('active', 'inactive');
                card.classList.add('hidden');
            }

            // Recalculate Grid Columns for Desktop
            const activeCount = Object.values(modelState).filter(Boolean).length;
            if (window.innerWidth >= 1024) {
                grid.style.gridTemplateColumns = `repeat(${activeCount}, minmax(0, 1fr))`;
            } else if (window.innerWidth >= 768) {
                grid.style.gridTemplateColumns = `repeat(${Math.min(activeCount, 2)}, minmax(0, 1fr))`;
            } else {
                grid.style.gridTemplateColumns = 'repeat(1, minmax(0, 1fr))';
            }
        }

        /**
         * API Interaction Logic: Asynchronous POST Fetch
         */
        async function fetchAIResponse(slug, prompt) {
            const out = document.getElementById(`out-${slug}`);
            const loader = document.getElementById(`load-${slug}`);
            
            loader.classList.remove('hidden');
            out.innerHTML = `<div class="animate-thinking space-y-3">
                <div class="h-2 bg-slate-800 rounded w-3/4"></div>
                <div class="h-2 bg-slate-800 rounded w-full"></div>
                <div class="h-2 bg-slate-800 rounded w-5/6"></div>
            </div>`;

            try {
                const response = await fetch(`${API_BASE}/${slug}/v1/chat/completions`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt, max_tokens: 2048 })
                });

                if (!response.ok) throw new Error(`Status: ${response.status}`);

                const data = await response.json();
                const content = data.choices?.[0]?.message?.content || data.response || "No valid response from server.";
                
                out.classList.remove('italic', 'text-slate-500');
                out.innerHTML = marked.parse(content);

            } catch (err) {
                out.innerHTML = `<div class="p-3 rounded bg-red-500/10 border border-red-500/20 text-red-400 text-xs font-mono">
                    FETCH FAILED: ${err.message}
                </div>`;
            } finally {
                loader.classList.add('hidden');
            }
        }

        // Event Handling: Submission
        const chatForm = document.getElementById('chat-form');
        const promptInput = document.getElementById('user-prompt');
        const submitBtn = document.getElementById('submit-btn');

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const promptValue = promptInput.value.trim();
            if (!promptValue) return;

            submitBtn.disabled = true;
            promptInput.value = '';
            promptInput.style.height = 'auto';

            // Trigger parallel calls for active models
            Object.keys(modelState).forEach(model => {
                if (modelState[model]) fetchAIResponse(model, promptValue);
            });

            // Re-enable button after 2 seconds to avoid spam
            setTimeout(() => { submitBtn.disabled = false; }, 2000);
        });

        // UI UX: Auto-growing Textarea
        promptInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // UI UX: Enter to Send (excluding Shift+Enter)
        promptInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                chatForm.dispatchEvent(new Event('submit'));
            }
        });

        // Initialize Library: Marked.js
        marked.setOptions({ breaks: true, gfm: true });
        
        // Responsive Layout Initialization
        window.addEventListener('resize', () => {
            const activeCount = Object.values(modelState).filter(Boolean).length;
            const grid = document.getElementById('grid-container');
            if (window.innerWidth >= 1024) {
                grid.style.gridTemplateColumns = `repeat(${activeCount}, minmax(0, 1fr))`;
            } else if (window.innerWidth >= 768) {
                grid.style.gridTemplateColumns = `repeat(${Math.min(activeCount, 2)}, minmax(0, 1fr))`;
            } else {
                grid.style.gridTemplateColumns = 'repeat(1, minmax(0, 1fr))';
            }
        });
    </script>
</body>
</html>
